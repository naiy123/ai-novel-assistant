# 🤖 Gemini 模型快速切换指南

## 🎯 一键切换模型

### 快速切换步骤

1. **打开文件**
   ```
   ai-novel-assistant/backend/config/model-switcher.js
   ```

2. **修改第11行**
   ```javascript
   export const CURRENT_MODEL = 'gemini-2.5-flash-lite'  // ← 修改这里
   ```

3. **保存文件**
   - 按 `Ctrl+S`
   - nodemon 会自动检测并重启后端
   - 所有AI功能立即使用新模型

---

## 📋 可用模型列表

### 🌟 推荐模型（Gemini 2.5 系列）

#### 1. `gemini-2.5-flash` ⭐
- **描述**：平衡性能和速度
- **定价**：标准
- **特性**：快速响应、高质量、多模态支持
- **最大Tokens**：8192
- **适合**：日常写作、标准生成

#### 2. `gemini-2.5-flash-lite` ⭐ (当前使用)
- **描述**：轻量快速版本
- **定价**：低成本
- **特性**：超快响应、低成本、适合高频调用
- **最大Tokens**：4096
- **适合**：短文本、快速修改、高频使用

#### 3. `gemini-2.5-pro`
- **描述**：旗舰模型，最高质量
- **定价**：高级（较贵）
- **特性**：最高质量、复杂推理、长文本支持
- **最大Tokens**：32768
- **适合**：长篇创作、复杂剧情、高质量要求

---

### 📦 Gemini 2.0 系列

#### 4. `gemini-2.0-flash`
- **描述**：稳定版本
- **定价**：标准
- **特性**：稳定可靠、广泛测试
- **最大Tokens**：8192

#### 5. `gemini-2.0-flash-exp`
- **描述**：实验版
- **定价**：标准
- **特性**：实验性功能、可能不稳定
- **最大Tokens**：8192

---

### 🔙 Gemini 1.5 系列（向后兼容）

#### 6. `gemini-1.5-flash`
- **描述**：上代模型
- **最大Tokens**：8192

#### 7. `gemini-1.5-pro`
- **描述**：上代旗舰
- **最大Tokens**：32768

#### 8. `gemini-1.5-flash-8b`
- **描述**：超轻量版本
- **定价**：极低成本
- **特性**：极快、极低成本、基础任务
- **最大Tokens**：8192

---

## 🔄 切换示例

### 示例1：切换到高质量模型
```javascript
// 在 model-switcher.js 第11行
export const CURRENT_MODEL = 'gemini-2.5-pro'
```
保存后，所有AI功能使用高质量模型。

### 示例2：切换到低成本模型
```javascript
export const CURRENT_MODEL = 'gemini-1.5-flash-8b'
```
保存后，token消耗大幅降低。

### 示例3：切换到平衡模型
```javascript
export const CURRENT_MODEL = 'gemini-2.5-flash'
```
保存后，获得最佳性价比。

---

## 📊 模型对比

| 模型 | 速度 | 质量 | 成本 | 推荐场景 |
|------|------|------|------|---------|
| 2.5-pro | 中 | ⭐⭐⭐⭐⭐ | 💰💰💰 | 长篇精品创作 |
| 2.5-flash | 快 | ⭐⭐⭐⭐ | 💰💰 | 日常写作（推荐） |
| 2.5-flash-lite | 极快 | ⭐⭐⭐ | 💰 | 快速修改、测试 |
| 1.5-flash-8b | 极快 | ⭐⭐ | 💰 | 基础任务、省钱 |

---

## 🧪 切换后验证

### 1. 查看后端终端
重启后会显示：
```
🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 
🤖 当前使用的 AI 模型
🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 
📝 模型名称: gemini-2.5-flash-lite
📋 描述: Gemini 2.5 Flash Lite - 轻量快速版本
💰 定价: 低成本
✨ 特性: 超快响应, 低成本, 适合高频调用
📏 最大Tokens: 4096
⭐ 推荐: 是
🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 🤖 
```

### 2. 测试AI功能
- 生成内容
- 查看后端日志
- 确认使用新模型

---

## 💡 使用技巧

### 场景1：日常开发测试
```javascript
export const CURRENT_MODEL = 'gemini-2.5-flash-lite'
```
✅ 快速响应，节省成本

### 场景2：正式创作
```javascript
export const CURRENT_MODEL = 'gemini-2.5-flash'
```
✅ 平衡质量和成本

### 场景3：重要章节
```javascript
export const CURRENT_MODEL = 'gemini-2.5-pro'
```
✅ 最高质量，适合关键内容

### 场景4：大量测试
```javascript
export const CURRENT_MODEL = 'gemini-1.5-flash-8b'
```
✅ 极低成本，适合批量测试

---

## 🔧 高级功能

### 查看所有模型
在后端代码中：
```javascript
import { printAllModels } from './config/model-switcher.js'
printAllModels()  // 打印所有可用模型信息
```

### 程序化切换（未来扩展）
```javascript
import { AVAILABLE_MODELS, getCurrentModel } from './config/model-switcher.js'

// 根据条件自动选择模型
const model = wordCount > 2000 
  ? AVAILABLE_MODELS['gemini-2.5-pro']      // 长文本用Pro
  : AVAILABLE_MODELS['gemini-2.5-flash-lite']  // 短文本用Lite
```

---

## ⚠️ 注意事项

1. **模型可用性**
   - 某些模型可能在特定区域不可用
   - 如遇错误，切换回推荐模型

2. **Token限制**
   - 不同模型有不同的 maxTokens 限制
   - 超长文本建议使用 Pro 版本

3. **成本控制**
   - Pro 版本成本较高
   - 建议日常使用 Flash 或 Flash Lite

4. **自动重启**
   - 修改后 nodemon 会自动重启
   - 无需手动重启后端

---

## 📞 切换失败排查

### 问题：后端启动失败
**检查**：
- CURRENT_MODEL 的值是否在 AVAILABLE_MODELS 中
- 是否有拼写错误

### 问题：API调用失败
**可能原因**：
- 该模型在你的区域不可用
- API权限不足

**解决**：
- 切换回 `gemini-2.5-flash-lite`
- 检查 Google Cloud 权限

---

## 🎉 快速切换流程

```
打开 model-switcher.js
    ↓
修改 CURRENT_MODEL = '新模型名称'
    ↓
保存（Ctrl+S）
    ↓
等待 nodemon 重启（约1-2秒）
    ↓
查看后端终端确认新模型
    ↓
开始使用！
```

---

**🚀 现在你可以随时快速切换模型了！**

所有AI功能（生成、续写、反检测、讨论、修改）都会自动使用你选择的模型！


