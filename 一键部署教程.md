# 🎯 一键部署教程（完全不需要代码基础）

## 📱 只需 3 步，10 分钟完成！

---

## 🎬 第 1 步：打开宝塔终端（1 分钟）

### 方法 A：在宝塔面板中打开

1. 打开浏览器，访问：`http://8.130.74.146:8888`
2. 输入宝塔的用户名和密码（在阿里云控制台查看）
3. 登录后，点击左侧菜单的 **"终端"**
4. 会弹出一个黑色窗口，这就是终端

### 方法 B：使用 SSH 工具

1. 下载 PuTTY（Windows）或使用 Terminal（Mac）
2. 连接到：`8.130.74.146`
3. 用户名：`root`
4. 密码：在阿里云控制台查看

---

## 🚀 第 2 步：运行一键部署命令（5 分钟）

### 复制下面这一行命令：

```bash
curl -sSL https://raw.githubusercontent.com/naiy123/ai-novel-assistant/main/install-baota.sh | bash
```

### 粘贴到终端中：

1. 在终端窗口中**右键点击** → 选择"粘贴"
2. 或者直接按 **Ctrl + V**（或 Cmd + V）
3. 按 **回车键**

### 然后等待自动安装！

脚本会自动：
- ✅ 检查并安装 Node.js
- ✅ 检查并安装 Git
- ✅ 下载项目代码
- ✅ 安装所有依赖
- ✅ 配置环境变量
- ✅ 构建前端
- ✅ 启动后端服务
- ✅ 配置 Nginx
- ✅ 自动测试

### 期间会问你几个问题：

#### 问题 1：是否配置代理？
```
是否配置代理？(y/n，默认n):
```
- 如果你**有** HTTP 代理：输入 `y` 然后回车
- 如果你**没有**代理：直接回车（默认 n）

#### 问题 2：代理地址（如果你选了 y）
```
请输入代理地址（格式: http://host:port）
代理地址:
```
- 输入你的代理地址，例如：`http://proxy.example.com:8080`
- 然后回车

### 就这么简单！

其他都是自动的，你只需要等待！

---

## ⏰ 第 3 步：等待完成（5 分钟）

脚本运行期间会显示进度：

```
🔧 第 2 步：安装必要软件（自动进行）
✅ Node.js 已安装
✅ Git 已安装
✅ PM2 已安装

📥 第 3 步：下载项目代码
✅ 项目下载完成

📦 第 4 步：安装项目依赖（可能需要 2-3 分钟）
✅ 后端依赖安装完成
✅ 前端依赖安装完成

...（继续）

🎉 部署完成！恭喜你！
```

### 看到这个界面就成功了：

```
╔═══════════════════════════════════════════╗
║                                           ║
║      🎉 部署完成！恭喜你！🎉              ║
║                                           ║
╚═══════════════════════════════════════════╝

🌐 访问地址：
   前端网页：http://8.130.74.146
   后端 API：http://8.130.74.146:5000

👤 测试账号：
   用户名：test
   密码：123456
```

---

## 🎉 完成！开始使用

### 1. 打开浏览器

访问：`http://8.130.74.146`

### 2. 登录测试

```
用户名：test
密码：123456
```

### 3. 开始创作

- 创建小说
- 添加章节
- 使用 AI 写作

---

## ❌ 如果遇到问题

### 问题 1：找不到 Google Cloud 密钥文件

**现象**：
```
❌ 未找到 Google Cloud 密钥文件
```

**解决**：

1. 在你的**本地电脑**（不是服务器），打开 PowerShell
2. 运行这个命令上传密钥：

```powershell
scp C:\path\to\your-key.json root@8.130.74.146:/www/wwwroot/ai-novel-assistant/backend/credentials/google-cloud-key.json
```

**替换**：
- `C:\path\to\your-key.json` → 你的密钥文件路径
- 密码：在阿里云控制台查看

3. 上传完成后，重新运行部署命令

### 问题 2：端口被占用

**现象**：
```
Error: listen EADDRINUSE: address already in use :::5000
```

**解决**：

在宝塔终端运行：
```bash
pm2 delete all
bash install-baota.sh
```

### 问题 3：AI 功能不工作

**原因**：没有配置代理

**解决**：

1. 购买 HTTP 代理（推荐：https://www.moguproxy.com/）
2. 编辑配置文件：

```bash
vi /www/wwwroot/ai-novel-assistant/backend/.env.production
```

3. 添加这两行（修改为你的代理地址）：

```
HTTP_PROXY=http://你的代理:端口
HTTPS_PROXY=http://你的代理:端口
```

4. 保存（按 ESC，输入 `:wq`，回车）
5. 重启后端：

```bash
pm2 restart ai-novel-backend
```

---

## 🔧 常用命令（收藏）

### 查看后端日志
```bash
pm2 logs ai-novel-backend
```

### 重启后端
```bash
pm2 restart ai-novel-backend
```

### 停止后端
```bash
pm2 stop ai-novel-backend
```

### 查看运行状态
```bash
pm2 status
```

### 更新代码
```bash
cd /www/wwwroot/ai-novel-assistant
git pull
cd frontend && npm run build
pm2 restart ai-novel-backend
```

---

## 📱 需要帮助？

### 复制粘贴不会？

**Windows：**
- 复制：选中文字后，按 `Ctrl + C`
- 粘贴：在终端右键，选择"粘贴"

**Mac：**
- 复制：选中文字后，按 `Cmd + C`
- 粘贴：在终端按 `Cmd + V`

### 找不到终端？

在宝塔面板左侧菜单，最下面有个 **"终端"** 图标。

### 不知道密码？

在阿里云控制台：
1. 进入你的服务器详情页
2. 点击"应用详情"
3. 查看宝塔的登录信息

---

## 🎓 视频教程（推荐）

如果你更喜欢看视频，可以搜索：

- B站搜索："宝塔面板使用教程"
- YouTube 搜索："Baota Panel Tutorial"

---

## 💡 重要提示

### ✅ 优点
- 🚀 超简单：只需复制粘贴一行命令
- 🤖 全自动：安装、配置、启动全自动
- 🎯 零基础：完全不需要编程知识
- ⏰ 超快速：10 分钟完成

### ⚠️ 注意
- 📱 需要 HTTP 代理才能使用 AI 功能
- 💰 代理费用约 ¥30-50/月
- 🔒 记得修改默认密码
- 💾 定期备份数据

---

## 🎉 恭喜！

如果你看到这里，说明你已经准备好了！

现在就去宝塔终端，运行那一行命令吧：

```bash
curl -sSL https://raw.githubusercontent.com/naiy123/ai-novel-assistant/main/install-baota.sh | bash
```

**10 分钟后见！** 🚀

