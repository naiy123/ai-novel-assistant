# 🤖 AI 小说创作助手

基于 Google Gemini 2.5 Pro 的智能 AI 写作工具，支持章节管理和连续创作。

## ✨ 功能特性

### 📚 章节管理
- ✅ 创建多个章节
- ✅ 重命名章节
- ✅ 删除章节
- ✅ 快速切换章节
- ✅ 实时保存内容

### 🎯 AI 智能生成
- ✅ 基于上下文续写
- ✅ 流式实时输出
- ✅ 自动追加到章节
- ✅ 支持手动编辑

### 📝 创作参数
- **全局设置**（所有章节共享）
  - 故事背景
  - 角色卡
  - 角色关系
  - 本章词条卡

- **章节独立**
  - 本章剧情大纲
  - 章节内容

## 🚀 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 获取 API Key

访问 [Google AI Studio](https://aistudio.google.com/app/apikey) 获取免费的 API Key。

### 3. 启动项目

```bash
npm run dev
```

访问 `http://localhost:3000`

### 4. 开始创作

1. **输入 API Key**（右上角）
2. **填写全局设置**
   - 故事背景：世界观设定
   - 角色卡：主要角色信息
   - 角色关系：角色间关系
   - 词条卡：物品、技能等

3. **创建章节**
   - 点击左侧"新建章节"
   - 双击章节可重命名
   - 点击章节切换编辑

4. **填写本章剧情**
   - 输入本章的剧情大纲
   - 描述本章发生的事件

5. **AI 生成**
   - 点击"AI 生成续写"
   - 等待 AI 创作
   - 内容自动追加到章节

6. **手动编辑**
   - 可以直接编辑章节内容
   - 修改、删除、润色

## 📊 界面布局

```
┌─────────────────────────────────────────────────────┐
│  📖 AI 小说创作助手    当前编辑：第一章             │
├──────────┬──────────────────────┬───────────────────┤
│          │  🎯 全局设置         │  ✍️ 章节内容      │
│ 📚 章节  │                      │                   │
│          │  🔑 API Key          │  [编辑器]         │
│ ┌──────┐ │  🌍 故事背景         │                   │
│ │第一章│ │  👥 角色卡          │  AI 生成的内容    │
│ └──────┘ │  🤝 角色关系        │  会自动追加在     │
│          │  📦 本章词条卡      │  这里...          │
│ ┌──────┐ │                      │                   │
│ │第二章│ │  📖 本章剧情        │                   │
│ └──────┘ │  [剧情大纲]         │                   │
│          │                      │                   │
│ [+ 新建] │  [✨ AI 生成续写]    │  500 字           │
└──────────┴──────────────────────┴───────────────────┘
```

## 🎮 使用场景

### 场景1：从零开始创作

1. 新建第一章
2. 填写故事背景和角色
3. 输入第一章剧情大纲
4. 点击生成，AI 自动创作开篇
5. 继续新建第二章...

### 场景2：续写已有内容

1. 在章节内容中粘贴已有文本
2. 填写接下来的剧情要点
3. 点击生成，AI 基于前文续写
4. 查看并编辑生成内容

### 场景3：多章节管理

1. 创建多个章节
2. 为每章设置不同的剧情
3. 逐章生成内容
4. 随时切换章节编辑

## 💡 创作技巧

### 1. 填写详细的背景

**好的示例：**
```
这是一个玄幻修仙世界，天地灵气充沛，修士通过吸收灵气修炼。
境界分为：炼气、筑基、金丹、元婴...
主角李云飞是青云宗外门弟子，资质平庸但性格坚韧。
```

**差的示例：**
```
玄幻世界
```

### 2. 描述清晰的角色

**好的示例：**
```
李云飞：主角，20岁，炼气九层，擅长剑法，性格坚毅不屈。
张师兄：25岁，筑基三层，青云宗内门弟子，为人和善，常指点主角。
```

**差的示例：**
```
李云飞、张师兄
```

### 3. 规划本章剧情

**好的示例：**
```
李云飞在后山修炼时，意外发现一个隐秘山洞。
洞中有一具枯骨，骸骨旁放着一本古老的功法秘籍。
正当他准备拿起秘籍时，突然感应到有人靠近...
```

**差的示例：**
```
主角找到秘籍
```

### 4. 利用上下文

AI 会自动读取当前章节的最后 500 字作为上下文，所以：
- 每次生成都会接续前文
- 保持故事连贯性
- 可以多次生成，逐步完成章节

## 📊 API 配额

### 免费版限制
- ⏱️ 每分钟 15 次请求
- 📅 每天 1,500 次请求

### 生成参数
- **模型**：Gemini 2.5 Pro
- **温度**：0.8（创造性）
- **输出**：约 500 字/次
- **上下文**：自动提取前 500 字

## ⚠️ 注意事项

### 1. 内容保存

- ✅ 章节内容保存在浏览器内存中
- ❌ 刷新页面会丢失所有内容
- 💡 建议定期复制到本地保存

### 2. API Key 安全

- 不要分享你的 API Key
- 不要在公开环境使用
- 可以随时在 Google AI Studio 撤销

### 3. 生成质量

- 详细的参数 = 更好的生成质量
- 多次生成可选择最佳结果
- 可以手动修改和润色

## 🔧 常见问题

### Q: 如何保存我的小说？

**A:** 当前版本内容保存在浏览器内存中：
1. 手动复制章节内容到 TXT 文件
2. 定期备份
3. 未来版本会添加导出功能

### Q: 可以导入已有文本吗？

**A:** 可以：
1. 创建新章节
2. 直接粘贴文本到"章节内容"
3. AI 会基于这些内容续写

### Q: 生成的内容不满意怎么办？

**A:** 可以：
1. 删除生成的内容
2. 调整剧情大纲
3. 重新生成
4. 手动编辑修改

### Q: 可以修改章节顺序吗？

**A:** 当前版本不支持，但可以：
1. 复制章节内容
2. 创建新章节
3. 粘贴到新位置
4. 删除旧章节

## 📄 项目结构

```
next/
├── src/
│   └── app/
│       ├── page.tsx          # 主应用（唯一文件）
│       ├── layout.tsx        # 布局
│       └── globals.css       # 样式
├── README.md                 # 本文档
└── TROUBLESHOOTING.md        # 故障排查
```

## 🎯 后续计划

### v1.1 数据持久化
- [ ] LocalStorage 自动保存
- [ ] 导出为 TXT/DOCX
- [ ] 导入外部文件

### v1.2 章节管理增强
- [ ] 拖拽排序
- [ ] 章节大纲
- [ ] 章节统计

### v1.3 AI 功能增强
- [ ] 选择生成位置
- [ ] 修改润色
- [ ] 多个生成结果选择

## 📜 许可证

MIT License

---

**开始你的 AI 创作之旅！** ✨📖🚀
