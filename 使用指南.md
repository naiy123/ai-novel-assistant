# 📖 AI 小说写作助手 - 使用指南

## 🎯 快速开始

### 1. 登录系统

访问应用首页，使用测试账号登录：
- **用户名**：`test`
- **密码**：`123456`

> 💡 提示：生产环境请修改或删除测试账号

### 2. 创建第一部小说

1. 点击左侧菜单 "📚 我的小说"
2. 点击 "➕ 创建新小说"
3. 输入小说名称（如：《异界之旅》）
4. 点击"创建"

### 3. 开始写作

1. 点击小说卡片的 "查看详情"
2. 在章节管理侧边栏点击 "➕ 新建章节"
3. 输入章节标题（如：第一章 穿越异界）
4. 在中间编辑器开始写作

---

## 📚 小说管理

### 小说列表

**位置**：我的小说页面

**功能**：
- 查看所有小说
- 创建新小说
- 删除小说（及其所有章节）
- 查看小说统计（章节数、字数）

**操作**：
```
➕ 创建新小说 → 输入名称 → 创建
🗑️ 删除小说 → 确认删除
👁️ 查看详情 → 进入写作界面
```

### 小说详情（写作界面）

**布局**：
```
┌────────────┬──────────────────┬──────────────┐
│  章节列表  │   编辑器区域     │  AI 写作面板 │
│  (左侧)    │   (中间)         │  (右侧)      │
│            │                  │              │
│  可折叠    │   Markdown 编辑   │  可显示/隐藏 │
└────────────┴──────────────────┴──────────────┘
```

---

## 📝 章节编辑

### 章节管理（左侧栏）

**功能**：
- ➕ 新建章节
- ✏️ 重命名章节
- 🗑️ 删除章节
- 📊 查看章节字数
- 🔄 切换章节
- 👁️ 折叠/展开侧边栏

**操作**：
1. **新建章节**：点击 "➕ 新建章节" → 输入标题
2. **选择章节**：点击章节标题切换
3. **重命名**：点击 "✏️" → 输入新标题
4. **删除**：点击 "🗑️" → 确认删除

### 编辑器（中间）

**功能**：
- ✍️ Markdown 格式写作
- 💾 自动保存（3秒后）
- 📊 实时字数统计
- ⏱️ 保存状态显示

**保存状态**：
- `✓ 已保存` - 内容已保存
- `● 未保存` - 有未保存的修改
- `⏳ 自动保存中...` - 正在保存

**快捷键**：
- `Ctrl + S`：手动保存（虽然有自动保存）
- `Ctrl + Z`：撤销
- `Ctrl + Y`：重做

**Markdown 支持**：
```markdown
# 一级标题
## 二级标题

**粗体** *斜体*

- 列表项1
- 列表项2

> 引用文字

[链接](url)
```

---

## 🎴 卡片库管理

### 卡片类型

| 类型 | 用途 | 字段 |
|------|------|------|
| 👤 **人物卡** | 角色设定 | 姓名、性格、外貌、背景、其他信息 |
| 🎁 **物品卡** | 道具设定 | 名称、描述、作用、其他信息 |
| 🏞️ **场景卡** | 场景设定 | 名称、描述、氛围、特殊信息 |

### 创建卡片

**位置**：卡片库页面

**步骤**：
1. 选择标签页（人物卡/物品卡/场景卡）
2. 点击 "➕ 新建XXX卡"
3. 填写卡片信息
4. 点击"创建"

### 人物卡示例

```
姓名：林小雨
性格：外表柔弱内心坚强，聪明机智
外貌：十八岁少女，身材娇小，乌黑长发
背景：出身江南林家，父母双亡，寻找失踪的祖父
其他：擅长古琴，身怀"清心诀"心法
```

### 物品卡示例

```
名称：碧玉清心佩
描述：温润的碧玉，椭圆形，内有流云纹理
作用：凝神静气，危险时发热预警，激活后有防护之力
其他：林家祖传三百年，只传嫡系女子
```

### 场景卡示例

```
名称：清风阁茶楼
描述：京城东市三层木质阁楼，飞檐翘角，古朴典雅
氛围：茶香檀香混合，一楼喧闹，二楼安静，三楼神秘
特殊：情报交换中转站，二楼"听雨轩"是主角常去之地
```

### 编辑和删除

- **编辑**：点击 "✏️" → 修改信息 → 保存
- **删除**：点击 "🗑️" → 确认删除

---

## 🤖 AI 辅助写作

### 开启 AI 面板

**位置**：章节编辑页面右上角

点击 "🤖 AI 写作" 按钮，右侧展开 AI 面板。

### AI 生成内容

**步骤**：

1. **输入剧情大纲**（必填）
   ```
   示例：主角在森林中遇到神秘老人，老人送给主角
   一把古剑，并告知古剑的秘密。主角心存感激，
   与老人告别后继续前行。
   ```

2. **选择生成字数**
   - 短篇（约 500 字）
   - 中篇（约 1000 字）
   - 较长（约 1500 字）
   - 标准（约 2000 字）← 默认
   - 长篇（约 3000 字）
   - 超长（约 5000 字）

3. **选择人物卡**（可选，多选）
   - 勾选要在此段内容中出现的人物
   - AI 会根据人物性格生成对话和行为

4. **选择物品卡**（可选，多选）
   - 勾选要在此段内容中出现的物品
   - AI 会根据物品特性描写

5. **选择场景卡**（可选，单选）
   - 选择内容发生的场景
   - AI 会根据场景氛围描写环境

6. **点击"生成内容"**

### 生成结果

- ⏳ AI 正在生成（需要 10-30 秒）
- ✅ 生成成功：内容自动插入到编辑器末尾
- ❌ 生成失败：显示错误信息

**生成后**：
- 内容追加到当前章节末尾
- 可以手动编辑生成的内容
- 自动保存到章节中

### AI 提示词原理

AI 会根据你的选择生成结构化提示词：

```
# 写作任务
请根据以下设定和大纲，续写小说内容。

## 剧情大纲
[你输入的大纲]

## 目标字数
约 2000 字

## 相关人物
### 林小雨
- 性格：外表柔弱内心坚强...
- 外貌：十八岁少女...
- 背景：出身江南林家...

## 相关物品
### 碧玉清心佩
- 描述：温润的碧玉...
- 作用：凝神静气...

## 场景设定
### 清风阁茶楼
- 描述：京城东市三层木质阁楼...
- 氛围：茶香檀香混合...

## 写作要求
1. 严格遵守人物设定
2. 合理描写物品特性
3. 符合场景氛围
4. 情节连贯自然
5. 约 2000 字
```

### AI 使用技巧

**✅ 好的实践**：
- 大纲描述具体、清晰
- 只选择当前场景相关的卡片
- 选择合适的字数（不要太长）
- 生成后检查并编辑内容

**❌ 避免**：
- 大纲太简单（如："继续写"）
- 选择无关的人物/物品
- 一次生成太多字数（超过 3000）
- 完全不编辑就发布

**示例对比**：

| 不好的大纲 | 好的大纲 |
|-----------|---------|
| "继续写" | "主角在森林中迷路，遇到神秘老人指路" |
| "打一架" | "主角与黑衣人在茶楼二楼激烈交手，使用祖传玉佩防御" |
| "发展感情" | "主角与女主在月下谈心，分享各自的过往经历" |

---

## 💡 写作工作流推荐

### 方法 1：纯手写

1. 创建小说和章节
2. 直接在编辑器中写作
3. 利用自动保存功能

**适合**：有明确构思，喜欢完全掌控

### 方法 2：AI 辅助（推荐）

1. 准备工作：创建人物卡、物品卡、场景卡
2. 规划大纲：列出每章的主要情节
3. AI 生成：输入大纲，选择相关卡片，生成内容
4. 手动润色：编辑 AI 生成的内容，添加细节
5. 重复步骤 3-4

**适合**：想提高效率，需要灵感

### 方法 3：混合模式

1. 关键情节手写
2. 过渡段落用 AI
3. 对话和描写用 AI
4. 全文统一润色

**适合**：效率和质量平衡

---

## 📊 数据统计

### 章节统计

在编辑器右上角显示：
- 📝 当前章节字数
- 💾 保存状态

### 小说统计

在小说列表页显示：
- 📖 总章节数
- 📝 总字数
- 📅 创建时间

---

## ⚙️ 高级功能

### 批量操作（未来版本）

- 批量导出章节
- 批量删除章节
- 章节排序

### 协作功能（未来版本）

- 多人编辑
- 评论和批注
- 版本历史

### 发布功能（未来版本）

- 导出为 TXT/EPUB
- 发布到小说网站
- 生成封面

---

## 🐛 常见问题

### Q1: 编辑器内容丢失？

**自动保存机制**：
- 停止输入 3 秒后自动保存
- 切换章节前自动保存
- 关闭页面前提醒保存

**建议**：重要内容随时点击"保存"按钮。

### Q2: AI 生成内容不满意？

**解决方法**：
1. 修改大纲，更具体描述
2. 调整选择的卡片
3. 修改字数设置
4. 重新生成
5. 手动编辑生成的内容

### Q3: 卡片太多，难以管理？

**技巧**：
- 只创建主要角色的人物卡
- 重要物品才建立物品卡
- 常用场景才建立场景卡
- 定期删除不用的卡片

### Q4: AI 生成速度慢？

**原因**：
- 字数设置太大（如 5000 字）
- 网络延迟
- API 并发限制

**解决**：
- 使用较小的字数（1000-2000 字）
- 分段生成
- 等待当前生成完成再开始新的

### Q5: 生成的内容不连贯？

**原因**：AI 不了解前文

**解决**：
- 在大纲中简要提及前文情节
- 手动调整生成内容
- 分多次小段生成

### Q6: 如何备份数据？

**当前版本**（内存数据库）：
- 手动复制粘贴到本地文件

**未来版本**：
- 自动备份到云端
- 导出功能

---

## 🎯 使用技巧总结

### ✅ 推荐做法

1. **先规划再写作**
   - 创建主要角色的人物卡
   - 规划章节大纲
   - 确定关键场景

2. **合理使用 AI**
   - 用于生成过渡段落
   - 用于扩展描写
   - 用于提供灵感
   - 但需要人工润色

3. **善用卡片库**
   - 建立完整的人物设定
   - 记录重要物品和场景
   - AI 生成时选择相关卡片

4. **保持写作节奏**
   - 利用自动保存，不用担心丢失
   - 分章节写作，逐步推进
   - AI 辅助提高效率

### ❌ 避免的做法

1. ❌ 完全依赖 AI（缺乏个人风格）
2. ❌ 不建立卡片就用 AI（质量差）
3. ❌ 一次生成太多内容（容易不连贯）
4. ❌ 生成后不检查就发布（可能有问题）

---

## 📞 获取帮助

如有问题：
1. 查看 [README-部署指南.md](./README-部署指南.md)
2. 查看 [Google-Cloud-配置指南.md](./Google-Cloud-配置指南.md)
3. 检查后端日志
4. 联系技术支持

---

**祝你创作愉快！✍️**
