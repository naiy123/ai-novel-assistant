# 🚀 快速开始

## 📦 安装依赖

### 后端
```powershell
cd backend
npm install
```

### 前端
```powershell
cd frontend
npm install
```

---

## ⚙️ 配置

### 1. 配置 Google Cloud

1. 访问 [Google Cloud Console](https://console.cloud.google.com/)
2. 创建项目并启用 Vertex AI API
3. 创建服务账号并下载密钥文件
4. 将密钥文件保存到 `backend/credentials/google-cloud-key.json`

**详细步骤**：查看 [Google-Cloud-配置指南.md](./Google-Cloud-配置指南.md)

### 2. 配置环境变量

在 `backend` 目录创建 `.env` 文件：

```env
# Google Cloud 配置
GOOGLE_APPLICATION_CREDENTIALS=credentials/google-cloud-key.json
VERTEX_AI_PROJECT_ID=你的项目ID
VERTEX_AI_LOCATION=us-central1

# 服务器配置
PORT=5000
JWT_SECRET=your-secret-key-change-this

# 如果在中国需要代理访问Google API
# HTTP_PROXY=http://127.0.0.1:7890
# HTTPS_PROXY=http://127.0.0.1:7890
```

---

## ▶️ 启动应用

### 方式1：手动启动（开发环境）

```powershell
# 终端1：启动后端
cd backend
npm run dev

# 终端2：启动前端
cd frontend
npm run dev
```

然后访问：http://localhost:3000

### 方式2：使用代理启动（中国用户）

如果你在中国，需要代理才能访问Google API：

```powershell
.\start-with-proxy.ps1
```

**前提**：本地安装了代理软件（如Clash），端口为 7890

### 方式3：使用PM2（生产环境）

```powershell
cd backend
pm2 start server.js --name "ai-novel-backend"

cd frontend
npm run build
pm2 serve dist 3000 --name "ai-novel-frontend" --spa
```

---

## 🔑 测试账号

- **用户名**：`test`
- **密码**：`123456`

---

## 📝 基本使用

### 1. 创建小说
首页 → 点击"新建小说" → 输入标题和简介

### 2. 创建章节
进入小说 → 点击"新建章节" → 开始写作

### 3. 使用AI辅助
- 写一段剧情大纲
- 点击"AI续写"按钮
- 选择字数（500-5000字）
- 等待AI生成

**详细使用教程**：查看 [使用指南.md](./使用指南.md)

---

## 🛠️ 常用命令

### Git 版本管理
```powershell
# 快速提交并推送（使用脚本）
.\快速推送.bat

# 或者手动执行
git add .
git commit -m "更新说明"
git push
```

### PM2 服务管理
```powershell
# 查看服务状态
pm2 status

# 查看日志
pm2 logs

# 重启服务
pm2 restart all
```

**完整命令列表**：查看 [管理命令.md](./管理命令.md)

---

## 🆘 常见问题

### 问题1：后端启动失败，提示找不到Google Cloud密钥

**解决**：
1. 确认 `backend/credentials/google-cloud-key.json` 文件存在
2. 检查 `backend/.env` 中的路径配置是否正确

### 问题2：提示无法连接Google API

**原因**：Google API在中国被墙

**解决**：
- 方式1：使用 `start-with-proxy.ps1` 脚本启动（需要本地代理）
- 方式2：将后端部署到海外服务器

### 问题3：前端页面空白

**解决**：
1. 检查浏览器控制台是否有错误
2. 确认后端服务正在运行
3. 检查前端代码中的API地址配置

### 问题4：AI生成很慢或失败

**原因**：
- 网络连接问题
- Google API额度不足
- 提示词太长

**解决**：
1. 检查后端日志：`pm2 logs ai-novel-backend`
2. 测试API连接：`node backend/test-vertex-ai.js`
3. 检查Google Cloud配额

---

## 📚 更多文档

| 文档 | 说明 |
|------|------|
| [README.md](./README.md) | 项目介绍 |
| [使用指南.md](./使用指南.md) | 详细功能使用 |
| [Google-Cloud-配置指南.md](./Google-Cloud-配置指南.md) | Google Cloud配置 |
| [管理命令.md](./管理命令.md) | 服务管理命令 |

---

## 🎯 下一步

1. ✅ 启动应用
2. 📝 创建第一部小说
3. 🎴 添加人物卡片
4. 🤖 使用AI辅助写作

**开始创作吧！✍️**



